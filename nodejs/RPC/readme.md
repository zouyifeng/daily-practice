Remote Procedure Call 远程过程调用

rpc vs ajax

相同点：
两台计算机之间的网络通信
双方约定数据格式

不同点：
RPC不一定使用DNS作为寻址服务（一般在内网内相互请求）
应用层协议一般不适用HTTP（二进制协议，更小的数据包体积，更快的编解码速率） ajax -> http协议（文本协议）
基于TCP或UDP协议

寻址过程：
ajax通过DNS解析拿到IP，再请求
rpc通过ID拿到IP，在请求

TCP通信方式：
单工通信
半双工通信（同一时间内，只有一段能向另一端发送）
全双工通信

nodejs Buffer 编解码二进制数据包

protocol buffer  二进制协议编码库


多路复用RPC通道 

net 模块


半双工通信需要带上序号，才能转换为全双工通信。如果服务端响应不带上序号，一旦发生延迟等情况，客户端无法确认响应是哪个请求的，请求包和返回包错乱。需要添加包序号确认顺序。


tcp底层会自动把同时发的包拼接起来，拼成打包 -> 粘包，需要分包操作 
